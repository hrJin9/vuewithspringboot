{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelText as _vModelText, withDirectives as _withDirectives, vModelRadio as _vModelRadio } from \"vue\";\nconst _hoisted_1 = {\n  class: \"cart\"\n};\nconst _hoisted_2 = {\n  class: \"container\"\n};\nconst _hoisted_3 = {\n  class: \"row\"\n};\nconst _hoisted_4 = {\n  class: \"col-md-4 order-md-2 mb-4\"\n};\nconst _hoisted_5 = {\n  class: \"d-flex justify-content-between align-items-center mb-3\"\n};\nconst _hoisted_6 = {\n  class: \"badge badge-secondary badge-pill\"\n};\nconst _hoisted_7 = {\n  class: \"list-group mb-3\"\n};\nconst _hoisted_8 = {\n  class: \"my-0\"\n};\nconst _hoisted_9 = {\n  class: \"text-muted\"\n};\nconst _hoisted_10 = {\n  class: \"text-center total-price\"\n};\nconst _hoisted_11 = {\n  class: \"col-md-8 order-md-1\"\n};\nconst _hoisted_12 = {\n  class: \"needs-validation\"\n};\nconst _hoisted_13 = {\n  class: \"mb-3\"\n};\nconst _hoisted_14 = {\n  class: \"input-group\"\n};\nconst _hoisted_15 = {\n  class: \"mb-3\"\n};\nconst _hoisted_16 = {\n  class: \"d-block my-3\"\n};\nconst _hoisted_17 = {\n  class: \"custom-control custom-radio\"\n};\nconst _hoisted_18 = {\n  class: \"custom-control custom-radio\"\n};\nconst _hoisted_19 = {\n  class: \"row\"\n};\nconst _hoisted_20 = {\n  class: \"col-md-6 mb-3\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[18] || (_cache[18] = _createElementVNode(\"div\", {\n    class: \"py-5 text-center\"\n  }, [_createElementVNode(\"h2\", null, \"주문하기\")], -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"h4\", _hoisted_5, [_cache[6] || (_cache[6] = _createElementVNode(\"span\", {\n    class: \"text-muted\"\n  }, \"구입 목록\", -1 /* HOISTED */)), _createElementVNode(\"span\", _hoisted_6, _toDisplayString($setup.state.items.length), 1 /* TEXT */)]), _createElementVNode(\"ul\", _hoisted_7, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.state.items, (i, idx) => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: idx,\n      class: \"list-group-item d-flex justify-content-between lh-condensed\"\n    }, [_createElementVNode(\"div\", null, [_createElementVNode(\"h6\", _hoisted_8, _toDisplayString(i.name), 1 /* TEXT */), _cache[7] || (_cache[7] = _createElementVNode(\"small\", {\n      class: \"text-muted\"\n    }, \"Brief description\", -1 /* HOISTED */))]), _createElementVNode(\"span\", _hoisted_9, _toDisplayString($setup.lib.getNumberFormatted(i.price - i.price * i.discountPer / 100)) + \"원\", 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"div\", _hoisted_10, _toDisplayString($setup.lib.getNumberFormatted($setup.computedPrice)) + \"원 \", 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_11, [_cache[17] || (_cache[17] = _createElementVNode(\"h4\", {\n    class: \"mb-3\"\n  }, \"주문자 정보\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"div\", _hoisted_13, [_cache[9] || (_cache[9] = _createElementVNode(\"label\", {\n    for: \"username\"\n  }, \"이름\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_14, [_cache[8] || (_cache[8] = _createElementVNode(\"div\", {\n    class: \"input-group-prepend\"\n  }, [_createElementVNode(\"span\", {\n    class: \"input-group-text\"\n  }, \"@\")], -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    id: \"username\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.state.form.name = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.state.form.name]])])]), _createElementVNode(\"div\", _hoisted_15, [_cache[10] || (_cache[10] = _createElementVNode(\"label\", {\n    for: \"address\"\n  }, \"주소\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    id: \"address\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.state.form.address = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.state.form.address]])]), _cache[14] || (_cache[14] = _createElementVNode(\"hr\", {\n    class: \"mb-4\"\n  }, null, -1 /* HOISTED */)), _cache[15] || (_cache[15] = _createElementVNode(\"h4\", {\n    class: \"mb-3\"\n  }, \"결제수단\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"div\", _hoisted_17, [_withDirectives(_createElementVNode(\"input\", {\n    id: \"card\",\n    name: \"paymentMethod\",\n    type: \"radio\",\n    class: \"custom-control-input\",\n    checked: \"\",\n    value: \"card\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.state.form.payment = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelRadio, $setup.state.form.payment]]), _cache[11] || (_cache[11] = _createElementVNode(\"label\", {\n    class: \"custom-control-label\",\n    for: \"credit\"\n  }, \"신용 카드\", -1 /* HOISTED */))]), _createElementVNode(\"div\", _hoisted_18, [_withDirectives(_createElementVNode(\"input\", {\n    id: \"debit\",\n    name: \"paymentMethod\",\n    type: \"radio\",\n    class: \"custom-control-input\",\n    value: \"bank\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.state.form.payment = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelRadio, $setup.state.form.payment]]), _cache[12] || (_cache[12] = _createElementVNode(\"label\", {\n    class: \"custom-control-label\",\n    for: \"debit\"\n  }, \"무통장 입금\", -1 /* HOISTED */))])]), _createElementVNode(\"div\", _hoisted_19, [_createElementVNode(\"div\", _hoisted_20, [_cache[13] || (_cache[13] = _createElementVNode(\"label\", {\n    for: \"cc-number\"\n  }, \"카드 번호\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    id: \"cc-number\",\n    placeholder: \"\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.state.form.cardNumber = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.state.form.cardNumber]])])]), _cache[16] || (_cache[16] = _createElementVNode(\"hr\", {\n    class: \"mb-4\"\n  }, null, -1 /* HOISTED */)), _createElementVNode(\"button\", {\n    class: \"btn btn-primary btn-lg btn-block\",\n    onClick: _cache[5] || (_cache[5] = (...args) => $setup.submit && $setup.submit(...args))\n  }, \"결제하기\")])])])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_toDisplayString","$setup","state","items","length","_hoisted_7","_Fragment","_renderList","i","idx","key","_hoisted_8","name","_hoisted_9","lib","getNumberFormatted","price","discountPer","_hoisted_10","computedPrice","_hoisted_11","_hoisted_12","_hoisted_13","for","_hoisted_14","type","id","_cache","$event","form","_hoisted_15","address","_hoisted_16","_hoisted_17","checked","value","payment","_hoisted_18","_hoisted_19","_hoisted_20","placeholder","cardNumber","onClick","args","submit"],"sources":["C:\\dev-projects\\business\\vue-ex\\shoppingmall\\front-end\\src\\pages\\Order.vue"],"sourcesContent":["<template>\r\n  <div class=\"cart\">\r\n    <div class=\"container\">\r\n      <div class=\"py-5 text-center\">\r\n        <h2>주문하기</h2>\r\n      </div>\r\n\r\n      <div class=\"row\">\r\n        <div class=\"col-md-4 order-md-2 mb-4\">\r\n          <h4 class=\"d-flex justify-content-between align-items-center mb-3\">\r\n            <span class=\"text-muted\">구입 목록</span>\r\n            <span class=\"badge badge-secondary badge-pill\">\r\n              {{ state.items.length }}\r\n            </span>\r\n          </h4>\r\n          <ul class=\"list-group mb-3\">\r\n            <li v-for=\"(i, idx) in state.items\" :key=\"idx\"  class=\"list-group-item d-flex justify-content-between lh-condensed\">\r\n              <div>\r\n                <h6 class=\"my-0\">{{i.name}}</h6>\r\n                <small class=\"text-muted\">Brief description</small>\r\n              </div>\r\n              <span class=\"text-muted\">{{ lib.getNumberFormatted(i.price - i.price * i.discountPer / 100) }}원</span>\r\n            </li>\r\n          </ul>\r\n          <div class=\"text-center total-price\">\r\n            {{  lib.getNumberFormatted(computedPrice) }}원\r\n          </div>\r\n        </div>\r\n        <div class=\"col-md-8 order-md-1\">\r\n          <h4 class=\"mb-3\">주문자 정보</h4>\r\n          <div class=\"needs-validation\">\r\n            <div class=\"mb-3\">\r\n              <label for=\"username\">이름</label>\r\n              <div class=\"input-group\">\r\n                <div class=\"input-group-prepend\">\r\n                  <span class=\"input-group-text\">@</span>\r\n                </div>\r\n                <input type=\"text\" class=\"form-control\" id=\"username\" v-model=\"state.form.name\">\r\n              </div>\r\n            </div>\r\n            <div class=\"mb-3\">\r\n              <label for=\"address\">주소</label>\r\n              <input type=\"text\" class=\"form-control\" id=\"address\" v-model=\"state.form.address\">\r\n            </div>\r\n            <hr class=\"mb-4\">\r\n            <h4 class=\"mb-3\">결제수단</h4>\r\n            <div class=\"d-block my-3\">\r\n              <div class=\"custom-control custom-radio\">\r\n                <input id=\"card\" name=\"paymentMethod\" type=\"radio\" class=\"custom-control-input\" checked\r\n                       value=\"card\" v-model=\"state.form.payment\"/>\r\n                <label class=\"custom-control-label\" for=\"credit\">신용 카드</label>\r\n              </div>\r\n              <div class=\"custom-control custom-radio\">\r\n                <input id=\"debit\" name=\"paymentMethod\" type=\"radio\" class=\"custom-control-input\"\r\n                       value=\"bank\" v-model=\"state.form.payment\">\r\n                <label class=\"custom-control-label\" for=\"debit\">무통장 입금</label>\r\n              </div>\r\n            </div>\r\n            <div class=\"row\">\r\n              <div class=\"col-md-6 mb-3\">\r\n                <label for=\"cc-number\">카드 번호</label>\r\n                <input type=\"text\" class=\"form-control\" id=\"cc-number\" placeholder=\"\"\r\n                       v-model=\"state.form.cardNumber\">\r\n              </div>\r\n            </div>\r\n            <hr class=\"mb-4\">\r\n            <button class=\"btn btn-primary btn-lg btn-block\" @click=\"submit\">결제하기</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport axios from \"axios\";\r\nimport {computed, reactive} from \"vue\";\r\nimport lib from \"@/scripts/lib\";\r\n\r\nexport default {\r\n  name: 'Order',\r\n  setup() {\r\n    const state = reactive({\r\n      items: [],\r\n      form: {\r\n        name: '',\r\n        address: '',\r\n        payment: '',\r\n        cardNumber: '',\r\n        items: ''\r\n      }\r\n    })\r\n\r\n    const load = () => axios.get('/api/cart/items').then(({data}) => {\r\n      state.items = data;\r\n    })\r\n\r\n    const computedPrice = computed(() => {\r\n      let result = 0;\r\n      for(let i of state.items) {\r\n        result += i.price - i.price * i.discountPer / 100;\r\n      }\r\n      return result;\r\n    })\r\n\r\n    const submit = () => {\r\n      const args = JSON.parse(JSON.stringify(state.form)); // 참조값 연결고리 끊기 위해\r\n      args.items = JSON.stringify(state.items);\r\n\r\n      axios.post('/api/orders', state.form).then(() => {\r\n        console.log('성공')\r\n      })\r\n    }\r\n\r\n    load();\r\n\r\n    return {state, lib, computedPrice, submit}\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}